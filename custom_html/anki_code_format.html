<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Anki Code Format</title>
    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css"
    />
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
  </head>
  <body>
    <section class="main">
      <p><textarea rows="20" cols="100" id="src"></textarea></p>
      <p><select name="langs" id="langs"></select></p>
      <hr />
      <button onclick="selectText('output')">Select</button>
      <div>
        <pre>
          <code id="output" class="hljs"></code>
        </pre>
      </div>
    </section>
  </body>
  <script>
    function selectText(containerId) {
      if (document.selection) {
        // IE
        var range = document.body.createTextRange();
        range.moveToElementText(document.getElementById(containerId));
        range.select();
      } else if (window.getSelection) {
        var range = document.createRange();
        range.selectNode(document.getElementById(containerId));
        window.getSelection().removeAllRanges();
        window.getSelection().addRange(range);
      }
    }
    window.addEventListener("DOMContentLoaded", (event) => {
      const langs = hljs.listLanguages();
      const langSelect = document.getElementById("langs");
      for (const lang of langs) {
        const opt = document.createElement("option");
        opt.value = lang;
        opt.innerHTML = lang;
        if (lang === "cpp") {
          opt.defaultSelected = true;
        }
        langSelect.appendChild(opt);
      }
      const button = document.getElementById("format");
      const src = document.getElementById("src");
      src.addEventListener("input", (event) => {
        const lang = document.getElementById("langs");
        const output = document.getElementById("output");
        const html = hljs.highlight(src.value, { language: lang.value }).value;
        output.innerHTML = html;
      });
    });
  </script>
</html>

<!-- 
#include<iostream>
using namespace std;
  
int main() {
  cout << "hello world!" << endl;
} 
-->
